import{L as y}from"./Admin.b5dfe990.js";import{H as g,r as k,m as f,P as b,a as j,o as l,c as i,b as p,w as N,d as e,e as U,f as B,s as A,F as _,p as x,t as s,g as m,h as L,i as u}from"./app.c6958972.js";import{S as h}from"./sweetalert2.all.1d02a522.js";import{_ as S}from"./_plugin-vue_export-helper.cdc0426e.js";const D={layout:y,components:{Head:g},props:{errors:Object,exams:Array,grades:Array,showAlert:{type:Boolean,default:!1},alertMessage:{type:String,default:""}},setup(d){const n=k({exam_id:new URL(document.location).searchParams.get("exam_id")}),o=f(!1),a=f(!1);return b(()=>d.showAlert,r=>{r&&h.fire({icon:"warning",title:"Ujian Belum Dilakukan",text:d.alertMessage||"Ujian belum dilakukan atau belum ada siswa yang mengerjakan ujian ini.",confirmButtonText:"OK",confirmButtonColor:"#3085d6"})},{immediate:!0}),b(()=>d.grades,r=>{n.exam_id&&r.length===0?a.value=!0:a.value=!1}),{form:n,filter:()=>{if(!n.exam_id){h.fire({icon:"error",title:"Pilih Ujian",text:"Silakan pilih ujian terlebih dahulu.",confirmButtonText:"OK",confirmButtonColor:"#3085d6"});return}o.value=!0,L.Inertia.get("/admin/reports/filter",{exam_id:n.exam_id},{onFinish:()=>{o.value=!1},onError:r=>{o.value=!1,r.exam_id&&h.fire({icon:"error",title:"Error",text:r.exam_id,confirmButtonText:"OK",confirmButtonColor:"#3085d6"})}})},loading:o,showNoDataAlert:a}}},C=e("title",null,"Laporan Nilai Ujian - Aplikasi Ujian Online",-1),O={class:"container-fluid mb-5 mt-5"},P={class:"row"},E={class:"col-md-12"},F={class:"card border-0 shadow mb-4"},K={class:"card-body"},T=e("h5",null,[e("i",{class:"fa fa-filter"}),u(" Filter Nilai Ujian")],-1),V=e("hr",null,null,-1),H={class:"row"},M={class:"col-md-9"},I=e("label",{class:"control-label",for:"name"},"Ujian",-1),R=e("option",{value:""},"-- Pilih Ujian --",-1),W=["value"],X={key:0,class:"alert alert-danger mt-2"},q={class:"col-md-3"},z=e("label",{class:"form-label fw-bold text-white"},"*",-1),G=["disabled"],J=e("i",{class:"fa fa-filter"},null,-1),Q={key:0},Y={key:1},Z={key:0,class:"card border-0 shadow"},$={class:"card-body"},ee={class:"row"},te=e("div",{class:"col-md-9 col-12"},[e("h5",{class:"mt-2"},[e("i",{class:"fa fa-chart-line"}),u(" Laporan Nilai Ujian")])],-1),ae={class:"col-md-3 col-12"},se=["href"],oe=e("i",{class:"fa fa-file-excel"},null,-1),le=u(" DOWNLOAD EXCEL"),ie=[oe,le],ne=e("hr",null,null,-1),re={class:"table-responsive"},de={class:"table table-bordered table-centered table-nowrap mb-0 rounded"},ce=e("thead",{class:"thead-dark"},[e("tr",{class:"border-0"},[e("th",{class:"border-0 rounded-start",style:{width:"5%"}},"No."),e("th",{class:"border-0"},"Ujian"),e("th",{class:"border-0"},"Sesi"),e("th",{class:"border-0"},"Nama Siswa"),e("th",{class:"border-0"},"Kelas"),e("th",{class:"border-0"},"Pelajaran"),e("th",{class:"border-0"},"Nilai")])],-1),_e=e("div",{class:"mt-2"},null,-1),me={class:"fw-bold text-center"},he={class:"text-center"},ue={class:"fw-bold text-center"},fe={key:1,class:"card border-0 shadow"},be=e("div",{class:"card-body text-center"},[e("div",{class:"alert alert-warning",role:"alert"},[e("i",{class:"fa fa-exclamation-triangle fa-2x mb-3"}),e("h5",null,"Tidak Ada Data Nilai"),e("p",{class:"mb-0"},"Ujian belum dilakukan atau belum ada siswa yang mengerjakan ujian ini.")])],-1),xe=[be];function ve(d,n,o,a,v,r){const w=j("Head");return l(),i(_,null,[p(w,null,{default:N(()=>[C]),_:1}),e("div",O,[e("div",P,[e("div",E,[e("div",F,[e("div",K,[T,V,e("form",{onSubmit:n[1]||(n[1]=U((...t)=>a.filter&&a.filter(...t),["prevent"]))},[e("div",H,[e("div",M,[I,B(e("select",{class:"form-select","onUpdate:modelValue":n[0]||(n[0]=t=>a.form.exam_id=t)},[R,(l(!0),i(_,null,x(o.exams,(t,c)=>(l(),i("option",{key:c,value:t.id},s(t.title)+" \u2014 Kelas : "+s(t.classroom.title)+" \u2014 Pelajaran : "+s(t.lesson.title),9,W))),128))],512),[[A,a.form.exam_id]]),o.errors.exam_id?(l(),i("div",X,s(o.errors.exam_id),1)):m("",!0)]),e("div",q,[z,e("button",{type:"submit",class:"btn btn-md btn-primary border-0 shadow w-100",disabled:a.loading},[J,a.loading?(l(),i("span",Q,"Loading...")):(l(),i("span",Y,"Filter"))],8,G)])])],32)])]),o.grades.length>0?(l(),i("div",Z,[e("div",$,[e("div",ee,[te,e("div",ae,[e("a",{href:`/admin/reports/export?exam_id=${a.form.exam_id}`,target:"_blank",class:"btn btn-success btn-md border-0 shadow w-100 text-white"},ie,8,se)])]),ne,e("div",re,[e("table",de,[ce,_e,e("tbody",null,[(l(!0),i(_,null,x(o.grades,(t,c)=>(l(),i("tr",{key:t.id},[e("td",me,s(c+1),1),e("td",null,s(t.exam.title),1),e("td",null,s(t.exam_session.title),1),e("td",null,s(t.student.name),1),e("td",he,s(t.exam.classroom.title),1),e("td",null,s(t.exam.lesson.title),1),e("td",ue,s(t.grade),1)]))),128))])])])])])):m("",!0),a.showNoDataAlert?(l(),i("div",fe,xe)):m("",!0)])])])],64)}const je=S(D,[["render",ve]]);export{je as default};
