import{L as T}from"./Student.0f4b62bc.js";import{H as q,L as S,a as y,o as n,c as l,b as v,w as p,d as s,t as i,n as h,F as g,p as f,i as r,g as b,a3 as D,a4 as O}from"./app.c6958972.js";import{_ as L}from"./_plugin-vue_export-helper.cdc0426e.js";const H={layout:T,components:{Head:q,Link:S},props:{exam_group:Object,grade:Object,answers:Array},methods:{formatDateTime(t){return t?new Date(t).toLocaleString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-"},getDuration(){if(!this.grade.start_time||!this.grade.end_time)return"-";const t=new Date(this.grade.start_time),c=new Date(this.grade.end_time);return Math.floor((c-t)/(1e3*60))},getGradeClass(t,c){return t>=c?"text-success":t>=c*.75?"text-warning":"text-danger"},getQuestionTypeBadge(t){return{single:"bg-primary",multiple:"bg-info",essay:"bg-secondary"}[t]||"bg-secondary"},cleanEssayAnswer(t){return t?this.cleanHtmlTags(t):"Tidak ada jawaban"},getQuestionTypeLabel(t){return{single:"Pilihan Tunggal",multiple:"Pilihan Ganda",essay:"Essay"}[t]||"Unknown"},getAnswerStatusBadge(t){return{Y:"bg-success",P:"bg-warning",N:"bg-danger"}[t]||"bg-secondary"},getAnswerStatusIcon(t){return{Y:"fa fa-check",P:"fa fa-minus",N:"fa fa-times"}[t]||"fa fa-question"},getAnswerStatusLabel(t){return{Y:"Benar",P:"Sebagian Benar",N:"Salah"}[t]||"Unknown"},getOptions(t){const c=[];return t.option_1&&c.push(t.option_1),t.option_2&&c.push(t.option_2),t.option_3&&c.push(t.option_3),t.option_4&&c.push(t.option_4),t.option_5&&c.push(t.option_5),c},getOptionText(t,c){const a=`option_${c}`,u=t[a]||"";return this.cleanHtmlTags(u)},cleanHtmlTags(t){return t?t.replace(/<\/?p[^>]*>/g,""):""},getOptionClass(t,c){const a=t.answer==c,u=t.question.answer==c;return a&&u?"text-success fw-bold":a&&!u?"text-danger fw-bold":!a&&u?"text-success":""},getMultipleOptionClass(t,c){const a=t.selected_answers_decoded.includes(c),u=t.correct_answers.includes(c);return a&&u?"text-success fw-bold":a&&!u?"text-danger fw-bold":!a&&u?"text-success":""}}},o=t=>(D("data-v-ae114346"),t=t(),O(),t),j=o(()=>s("title",null,"Detail History Ujian - Aplikasi Ujian Online",-1)),A={class:"container-fluid"},B={class:"row mb-4"},C={class:"col-md-12"},M={class:"d-flex justify-content-between align-items-center"},P=o(()=>s("h4",{class:"mb-0"},[s("i",{class:"fa fa-file-alt me-2"}),r(" Detail History Ujian ")],-1)),J={class:"text-muted mb-0"},N=o(()=>s("i",{class:"fa fa-long-arrow-alt-left me-2"},null,-1)),U=r(" Kembali "),K={class:"row mb-4"},E={class:"col-md-12"},Q={class:"card border-0 shadow"},V=o(()=>s("div",{class:"card-header bg-white py-3"},[s("h5",{class:"mb-0"},[s("i",{class:"fa fa-info-circle me-2"}),r(" Ringkasan Ujian ")])],-1)),Y={class:"card-body"},G={class:"row"},F={class:"col-md-6"},W={class:"table-responsive"},z={class:"table table-borderless"},R=o(()=>s("td",{width:"40%",class:"fw-bold"},"Nama Siswa",-1)),X=o(()=>s("td",{class:"fw-bold"},"Kelas",-1)),Z=o(()=>s("td",{class:"fw-bold"},"Ujian",-1)),I=o(()=>s("td",{class:"fw-bold"},"Materi",-1)),$=o(()=>s("td",{class:"fw-bold"},"Sesi",-1)),ss={class:"col-md-6"},ts={class:"table-responsive"},es={class:"table table-borderless"},as=o(()=>s("td",{width:"40%",class:"fw-bold"},"Waktu Mulai",-1)),os=o(()=>s("td",{class:"fw-bold"},"Waktu Selesai",-1)),is=o(()=>s("td",{class:"fw-bold"},"Durasi Pengerjaan",-1)),cs=o(()=>s("td",{class:"fw-bold"},"Nilai Akhir",-1)),ds={key:0,class:"badge bg-success ms-2"},ns=o(()=>s("i",{class:"fa fa-check"},null,-1)),ls=r(" Lulus "),_s=[ns,ls],rs={key:1,class:"badge bg-danger ms-2"},us=o(()=>s("i",{class:"fa fa-times"},null,-1)),hs=r(" Tidak Lulus "),ms=[us,hs],gs=o(()=>s("td",{class:"fw-bold"},"KKM",-1)),bs={class:"row mb-4"},fs={class:"col-md-3"},ys={class:"card border-0 shadow-sm bg-primary text-white"},vs={class:"card-body text-center"},ps={class:"mb-1"},ws=o(()=>s("p",{class:"mb-0"},"Total Soal",-1)),xs={class:"col-md-3"},ks={class:"card border-0 shadow-sm bg-success text-white"},Ts={class:"card-body text-center"},qs={class:"mb-1"},Ss=o(()=>s("p",{class:"mb-0"},"Benar",-1)),Ds={class:"col-md-3"},Os={class:"card border-0 shadow-sm bg-warning text-white"},Ls={class:"card-body text-center"},Hs={class:"mb-1"},js=o(()=>s("p",{class:"mb-0"},"Sebagian Benar",-1)),As={class:"col-md-3"},Bs={class:"card border-0 shadow-sm bg-danger text-white"},Cs={class:"card-body text-center"},Ms={class:"mb-1"},Ps=o(()=>s("p",{class:"mb-0"},"Salah",-1)),Js={class:"row"},Ns={class:"col-md-12"},Us={class:"card border-0 shadow"},Ks=o(()=>s("div",{class:"card-header bg-white py-3"},[s("h5",{class:"mb-0"},[s("i",{class:"fa fa-question-circle me-2"}),r(" Detail Jawaban ")])],-1)),Es={class:"card-body"},Qs={class:"card border-left-primary"},Vs={class:"card-header bg-light d-flex justify-content-between align-items-center"},Ys={class:"mb-0"},Gs={class:"badge bg-secondary me-2"},Fs={class:"badge bg-info"},Ws={class:"card-body"},zs={class:"mb-3"},Rs=o(()=>s("h6",{class:"fw-bold mb-2"},"Pertanyaan:",-1)),Xs=["innerHTML"],Zs={key:0,class:"mt-2"},Is=["src"],$s={key:1,class:"mt-2"},st={controls:"",class:"w-100"},tt=["src"],et=r(" Browser Anda tidak mendukung audio. "),at={key:0},ot=o(()=>s("h6",{class:"fw-bold mb-2"},"Pilihan Jawaban:",-1)),it={class:"row"},ct={class:"form-check"},dt=["id","name","value","checked"],nt=["for"],lt={class:"mt-2"},_t={class:"text-muted"},rt=o(()=>s("strong",null,"Jawaban yang dipilih:",-1)),ut=o(()=>s("br",null,null,-1)),ht={class:"text-success"},mt=o(()=>s("strong",null,"Jawaban yang benar:",-1)),gt={key:1},bt=o(()=>s("h6",{class:"fw-bold mb-2"},"Pilihan Jawaban (Pilih semua yang benar):",-1)),ft={class:"row"},yt={class:"form-check"},vt=["id","value","checked"],pt=["for"],wt={class:"mt-2"},xt={class:"text-muted"},kt=o(()=>s("strong",null,"Jawaban yang dipilih:",-1)),Tt={key:0},qt={key:1,class:"text-muted"},St=o(()=>s("br",null,null,-1)),Dt={class:"text-success"},Ot=o(()=>s("strong",null,"Jawaban yang benar:",-1)),Lt={key:2},Ht=o(()=>s("h6",{class:"fw-bold mb-2"},"Jawaban Siswa:",-1)),jt={class:"card bg-light border-0 mb-3"},At={class:"card-body"},Bt={class:"mb-0"},Ct=o(()=>s("h6",{class:"fw-bold mb-2"},"Jawaban yang Diharapkan:",-1)),Mt={class:"card bg-success bg-opacity-10 border-success border-opacity-25"},Pt={class:"card-body"},Jt={class:"mb-0"},Nt={key:0,class:"mt-2"},Ut={class:"text-muted"},Kt=o(()=>s("strong",null,"Tingkat Kemiripan:",-1));function Et(t,c,a,u,Qt,d){const w=y("Head"),x=y("Link");return n(),l(g,null,[v(w,null,{default:p(()=>[j]),_:1}),s("div",A,[s("div",B,[s("div",C,[s("div",M,[s("div",null,[P,s("p",J,i(a.exam_group.exam.title)+" - "+i(a.exam_group.exam.lesson.title),1)]),v(x,{href:"/student/exam-history",class:"btn btn-md btn-primary border-0 shadow"},{default:p(()=>[N,U]),_:1})])])]),s("div",K,[s("div",E,[s("div",Q,[V,s("div",Y,[s("div",G,[s("div",F,[s("div",W,[s("table",z,[s("tr",null,[R,s("td",null,i(a.exam_group.student.name),1)]),s("tr",null,[X,s("td",null,i(a.exam_group.student.classroom.title),1)]),s("tr",null,[Z,s("td",null,i(a.exam_group.exam.title),1)]),s("tr",null,[I,s("td",null,i(a.exam_group.exam.lesson.title),1)]),s("tr",null,[$,s("td",null,i(a.exam_group.exam_session.title),1)])])])]),s("div",ss,[s("div",ts,[s("table",es,[s("tr",null,[as,s("td",null,i(d.formatDateTime(a.grade.start_time)),1)]),s("tr",null,[os,s("td",null,i(d.formatDateTime(a.grade.end_time)),1)]),s("tr",null,[is,s("td",null,i(d.getDuration())+" menit",1)]),s("tr",null,[cs,s("td",null,[s("span",{class:h([d.getGradeClass(a.grade.grade,a.exam_group.exam.lesson.kkm),"fw-bold fs-5"])},i(a.grade.grade),3),a.grade.grade>=a.exam_group.exam.lesson.kkm?(n(),l("span",ds,_s)):(n(),l("span",rs,ms))])]),s("tr",null,[gs,s("td",null,i(a.exam_group.exam.lesson.kkm),1)])])])])])])])])]),s("div",bs,[s("div",fs,[s("div",ys,[s("div",vs,[s("h3",ps,i(a.answers.length),1),ws])])]),s("div",xs,[s("div",ks,[s("div",Ts,[s("h3",qs,i(a.grade.total_correct),1),Ss])])]),s("div",Ds,[s("div",Os,[s("div",Ls,[s("h3",Hs,i(a.grade.total_partial||0),1),js])])]),s("div",As,[s("div",Bs,[s("div",Cs,[s("h3",Ms,i(a.answers.length-a.grade.total_correct-(a.grade.total_partial||0)),1),Ps])])])]),s("div",Js,[s("div",Ns,[s("div",Us,[Ks,s("div",Es,[(n(!0),l(g,null,f(a.answers,(e,k)=>(n(),l("div",{key:e.id,class:"mb-4"},[s("div",Qs,[s("div",Vs,[s("h6",Ys,[s("span",Gs,i(k+1),1),s("span",{class:h(["badge me-2",d.getQuestionTypeBadge(e.question.question_type)])},i(d.getQuestionTypeLabel(e.question.question_type)),3)]),s("div",null,[s("span",{class:h(["badge me-2",d.getAnswerStatusBadge(e.is_correct)])},[s("i",{class:h(d.getAnswerStatusIcon(e.is_correct))},null,2),r(" "+i(d.getAnswerStatusLabel(e.is_correct)),1)],2),s("span",Fs,"Skor: "+i(e.score),1)])]),s("div",Ws,[s("div",zs,[Rs,s("div",{innerHTML:e.question.question,class:"question-content"},null,8,Xs),e.question.question_image?(n(),l("div",Zs,[s("img",{src:`/storage/questions/${e.question.question_image}`,class:"img-fluid rounded",style:{"max-width":"300px"}},null,8,Is)])):b("",!0),e.question.audio_file?(n(),l("div",$s,[s("audio",st,[s("source",{src:`/storage/questions/${e.question.audio_file}`,type:"audio/mpeg"},null,8,tt),et])])):b("",!0)]),e.question.question_type==="single"?(n(),l("div",at,[ot,s("div",it,[(n(!0),l(g,null,f(d.getOptions(e.question),(m,_)=>(n(),l("div",{key:_,class:"col-md-6 mb-2"},[s("div",ct,[s("input",{type:"radio",id:`option_${e.id}_${_}`,name:`question_${e.id}`,value:_+1,checked:e.answer==_+1,disabled:"",class:"form-check-input"},null,8,dt),s("label",{for:`option_${e.id}_${_}`,class:h(["form-check-label",d.getOptionClass(e,_+1)])},i(d.getOptionText(e.question,_+1)),11,nt)])]))),128))]),s("div",lt,[s("small",_t,[rt,s("span",{class:h(e.is_correct==="Y"?"text-success":"text-danger")},i(d.getOptionText(e.question,e.answer)),3)]),ut,s("small",ht,[mt,r(" "+i(d.getOptionText(e.question,e.question.answer)),1)])])])):e.question.question_type==="multiple"?(n(),l("div",gt,[bt,s("div",ft,[(n(!0),l(g,null,f(d.getOptions(e.question),(m,_)=>(n(),l("div",{key:_,class:"col-md-6 mb-2"},[s("div",yt,[s("input",{type:"checkbox",id:`option_${e.id}_${_}`,value:_+1,checked:e.selected_answers_decoded.includes(_+1),disabled:"",class:"form-check-input"},null,8,vt),s("label",{for:`option_${e.id}_${_}`,class:h(["form-check-label",d.getMultipleOptionClass(e,_+1)])},i(d.getOptionText(e.question,_+1)),11,pt)])]))),128))]),s("div",wt,[s("small",xt,[kt,e.selected_answers_decoded.length>0?(n(),l("span",Tt,i(e.selected_answers_decoded.map(m=>d.getOptionText(e.question,m)).join(", ")),1)):(n(),l("span",qt,"Tidak ada pilihan"))]),St,s("small",Dt,[Ot,r(" "+i(e.correct_answers.map(m=>d.getOptionText(e.question,m)).join(", ")),1)])])])):e.question.question_type==="essay"?(n(),l("div",Lt,[Ht,s("div",jt,[s("div",At,[s("p",Bt,i(d.cleanEssayAnswer(e.essay_answer)),1)])]),Ct,s("div",Mt,[s("div",Pt,[s("p",Jt,i(d.cleanHtmlTags(e.question.essay_answer)),1)])]),e.similarity_score?(n(),l("div",Nt,[s("small",Ut,[Kt,r(" "+i(Math.round(e.similarity_score*100))+"% ",1)])])):b("",!0)])):b("",!0)])])]))),128))])])])])])],64)}const Ft=L(H,[["render",Et],["__scopeId","data-v-ae114346"]]);export{Ft as default};
